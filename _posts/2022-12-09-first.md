---
title: '[Git] git reset HEAD vs git rm \--cached'
excerpt: "í—·ê°ˆë¦¬ëŠ” git ëª…ë ¹ì–´ ì •ë¦¬"

categories:
  - git
tags: 
  - [git]

date: 2022-12-09
last_modified_at: 2022-12-09
---

**â—git resetì™€ git rm --cached ëª…ë ¹ì„ ë¹„êµí•˜ê¸° ì „ì— ë¨¼ì € gitì—ì„œ ê´€ë¦¬í•˜ëŠ” íŒŒì¼ì˜ ë¼ì´í”„ì‚¬ì´í´ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ì.**

## ğŸš´â€â™€ï¸ë¼ì´í”„ì‚¬ì´í´

<p align="center"><img src="https://git-scm.com/book/en/v2/images/lifecycle.png"></p>

## ğŸš¶â€â™‚ï¸íŒŒì¼ì˜ ìƒíƒœ ë³€í™” ê³¼ì •

1. working directoryì— ìƒˆë¡œ ìƒì„±ëœ íŒŒì¼ì€ `Untracked` ìƒíƒœì— ìˆë‹¤.
   
   ```bash
   $ touch test.txt
   $ git status
   Untracked files:
   (use "git add <file>..." to include in what will be committed)
         test.txt
   ```

2. `Untracked` ìƒíƒœì— ìˆëŠ” íŒŒì¼ì„ git add ëª…ë ¹ìœ¼ë¡œ `staged` ìƒíƒœë¡œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤. 
   
   ```bash
   $ git add test.txt
   $ git status
   Changes to be committed: // staged ìƒíƒœ
   (use "git rm --cached <file>..." to unstage)
        new file:   test.txt
   ```

3. `staged` ìƒíƒœì˜ íŒŒì¼ì„ ì»¤ë°‹í•˜ë©´ í•´ë‹¹ íŒŒì¼ë“¤ì€ `Unmodified` ìƒíƒœë¡œ ë³€ê²½ëœë‹¤. 

4. `Unmodified` ìƒíƒœì˜ íŒŒì¼ì„ git rm --cached ëª…ë ¹ìœ¼ë¡œ `Untrack` ìƒíƒœë¡œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤. 
   
   ```bash
   $ git rm --cached test.txt
   rm 'test.txt'
   $ git status
   Changes to be committed:
   (use "git restore --staged <file>..." to unstage)
        deleted:    test.txt
   
    Untracked files:
      (use "git add <file>..." to include in what will be committed)
            test.txt
   ```

5. `Unmodigied` ìƒíƒœì˜ íŒŒì¼ì„ í¸ì§‘í•˜ë©´ `Modified` ìƒíƒœë¡œ ë³€ê²½ëœë‹¤.
   
   ```bash
   $ echo "Hello World" > test.txt
   $ git status
   Changes not staged for commit:
   (use "git add <file>..." to update what will be committed)
   (use "git restore <file>..." to discard changes in working directory)
        modified:   test.txt
   ```

6. `Modified` ìƒíƒœì˜ íŒŒì¼ì„ git add ëª…ë ¹ìœ¼ë¡œ `staged` ìƒíƒœë¡œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.
   
   ```bash
         $ git add test.txt
   $ git status
   Changes to be committed:
   (use "git restore --staged <file>..." to unstage)
        modified:   test.txt
   ```

## ğŸ’¿git rm --cached

ìœ„ ë„¤ë²ˆì§¸ ê³¼ì •ì—ì„œ ë³´ì•˜ë“¯ `git rm --cached` ëª…ë ¹ì€ track ë˜ê³  ìˆëŠ” íŒŒì¼ì„ Untrack í•˜ê³  delete ë˜ì—ˆìŒì„ stageì— ë°˜ì˜í•œë‹¤. ê°„ë‹¨íˆ ë§í•˜ë©´ staged ìƒíƒœì˜ íŒŒì¼ì„ Untrackd ìƒíƒœë¡œ ë³€ê²½í•œë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤.

> `git rm --cached` ëª…ë ¹ì€ working directoryì— ìˆëŠ” íŒŒì¼ì„ ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•ŠëŠ”ë‹¤. ë°˜ë©´ git rmì— --cached ì˜µì…˜ì´ ì—†ì„ ê²½ìš° ì‹¤ì œ working directoryì—ì„œ íŒŒì¼ì´ ì‚­ì œëœë‹¤. í•˜ì§€ë§Œ ì»¤ë°‹í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ git restore --staged, git restore ëª…ë ¹ì„ ì—°ë‹¬ì•„ ì‚¬ìš©í•˜ë©´ ì‰½ê²Œ ë³µêµ¬í•  ìˆ˜ ìˆë‹¤. git rm --cached ëª…ë ¹ì€  .gitignore íŒŒì¼ì— ì¶”ê°€í•˜ëŠ” ê²ƒì„ ë¹¼ë¨¹ì—ˆê±°ë‚˜ ëŒ€ìš©ëŸ‰ ë¡œê·¸ íŒŒì¼ì´ë‚˜ ì»´íŒŒì¼ëœ .a íŒŒì¼ ê°™ì€ ê²ƒì„ ì‹¤ ìˆ˜ë¡œ ì¶”ê°€í–ˆì„ ë•Œ ìœ ìš©í•˜ê²Œ ì“°ì¼ ìˆ˜ ìˆë‹¤.

## ğŸ”™git reset HEAD

`git reset HEAD` ëª…ë ¹ì€ staged ìƒíƒœì˜ íŒŒì¼ë“¤ì„ HEADê°€ ê°€ë¦¬í‚¤ëŠ” ìµœê·¼ ì»¤ë°‹ì˜ ìƒíƒœë¡œ ë˜ëŒë¦°ë‹¤. ì´ë•Œ working directoryì˜ íŒŒì¼ë“¤ì€ ë³€ê²½ë˜ì§€ ì•ŠëŠ”ë‹¤.

```bash
$ echo "Hello World2" >> test.txt
$ cat test.txt
Hello World      // ì´ì „ ì»¤ë°‹ ìƒíƒœ
Hello World2     // ì´ì „ ì»¤ë°‹ì—ëŠ” í•´ë‹¹ ì¤„ì´ í¬í•¨ë˜ì§€ ì•ŠìŒ.
$ git add test.txt
$ git reset HEAD test.txt
Unstaged changes after reset:
M       test.txt
$ git status
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
        modified:   test.txt
$ cat test.txt
Hello World
Hello World2      // working directoryëŠ” ì´ì „ ì»¤ë°‹ ìƒíƒœë¡œ ëŒì•„ê°€ì§€ ì•ŠìŒ. --hard ì˜µì…˜ê³¼ í•¨ê»˜ ìˆ˜í–‰ ì‹œ working directory íŒŒì¼ë„ í•¨ê»˜ ë³€ê²½ë¨.
```

> "HEAD"ì— ëŒ€í•œ ì„¤ëª…ì€ ë‹¤ë¥¸ í¬ìŠ¤íŠ¸ì—ì„œ ì •ë¦¬í•˜ë„ë¡ í•˜ê³ , ê°„ëµíˆ ì†Œê°œí•˜ìë©´ HEADëŠ” ì¼ë°˜ì ìœ¼ë¡œ ë¸Œëœì¹˜ë¥¼ ë°”ë¼ë³¸ë‹¤.  
> HEAD -> ë¸Œëœì¹˜(ì°¸ì¡° í¬ì¸íŠ¸) -> ìµœê·¼ ì»¤ë°‹

## ğŸ“Œgit reset HEAD vs git rm --cached ê²°ë¡ 

### ğŸŒ“ì°¨ì´ì 

+ **`git reset HEAD`  : staged -> Unstaged (Untracked X)**  
+ **`git rm --cached` : staged -> Untracked**

### ğŸŒ•ê³µí†µì 

+ **ë‘ ëª…ë ¹ì–´ ëª¨ë‘ working directoryì˜ íŒŒì¼ë“¤ì—ëŠ” ë³€í™”ê°€ ì—†ë‹¤.**

---

***
    ğŸ‘ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ ì¡°ì–¸ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ë‚¨ê²¨ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}